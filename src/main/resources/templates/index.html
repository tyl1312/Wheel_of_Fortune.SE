<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <title>Wheel of Fortune</title>
</head>
<body>

    <div class="header">
        <h2>Welcome, <span> <a th:href="@{/profile}" th:text="${fullName}"></a></span></h2>
        <div class="spin-container">
            <span class="spin-number">0</span>
            <img src="/img/ticket.png" alt="Spin" class="spin-img">
        </div>
    </div>

    <div class="container">
        <div class="milestone-container">
            <div class="milestones">
                <div class="chart-container">
                    <div class="line-container">
                        <div class="line"></div>
                        <div class="line left"></div>
                    </div>

                    <div class="milestone milestone__10" data-value="10">
                        <div class="dot">250k</div>
                        <div class="ticket-box">
                            <img src="/img/ticket.png" alt="Ticket" class="ticket-img">
                            <span class="ticket-count">1</span>
                        </div>
                    </div>
                    <div class="milestone milestone__30" data-value="30">
                        <div class="dot">750k</div>
                        <div class="ticket-box">
                            <img src="/img/ticket.png" alt="Ticket" class="ticket-img">
                            <span class="ticket-count">2</span>
                        </div>
                    </div>
                    <div class="milestone milestone__55" data-value="55">
                        <div class="dot">1250k</div>
                        <div class="ticket-box">
                            <img src="/img/ticket.png" alt="Ticket" class="ticket-img">
                            <span class="ticket-count">3</span>
                        </div>
                    </div>
                    <div class="milestone milestone__80" data-value="80">
                        <div class="dot">2000k</div>
                        <div class="ticket-box">
                            <img src="/img/ticket.png" alt="Ticket" class="ticket-img">
                            <span class="ticket-count">4</span>
                        </div>
                    </div>
                    <div class="milestone milestone__100" data-value="100">
                        <div class="dot">3000k</div>
                        <div class="ticket-box">
                            <img src="/img/ticket.png" alt="Ticket" class="ticket-img">
                            <span class="ticket-count">5</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="wheel-section">
            <h2>ðŸŽ‰ Lucky Spin ðŸŽ‰</h2>
            <div class="wheel-container">
                <svg id="wheel" width="400" height="400" viewBox="0 0 400 400"></svg>
                <div class="pointer"></div>
            </div>
            <button id="spinButton" class="spin-btn">Spin</button>
        </div>

        <div class="mission-container">
            <div class="btn-container">
                <img id="show-mission-btn" src="/img/paper.png" alt="Daily Missions" class="icon-btn">
                <img id="show-history-btn" src="/img/file.png" alt="Prize History" class="icon-btn">
            </div>

            <div id="mission-panel" class="hidden">
                <div class="mission-header">
                    <h3 class="daily-mission-title">Daily mission</h3>
                    <button id="close-mission-btn" class="close-btn">âœ•</button>
                </div>
                <div class="mission-list">

                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">Login the game</div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>1/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">Spin one time</div>
                        <button class="claim-btn">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">
                            Writing a review for purchased product
                        </div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">
                            Accumulate 100 loyalty points
                        </div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">Complete a transaction with a bill of 200,000 VND or more</div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">Complete a transaction with a bill of 1,000,000 VND or more</div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">Complete at least 3 transactions</div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">Complete a short survey about your shopping experience</div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>
                    <div class="mission-item">
                        <div class="mission-progress">
                            <span>0/1</span>
                            <img src="/img/ticket.png" alt="Ticket" class="mission-icon">
                        </div>
                        <div class="mission-description">Apply a digital coupon from the app during checkout</div>
                        <button class="claim-btn disabled">Claim</button>
                    </div>

                </div>
                <button class="claim-all-btn">Claim all</button>
            </div>

            <div id="history-panel" class="hidden">
                <div class="history-header">
                    <h3>Prize History</h3>
                    <button id="close-history-btn" class="close-btn">âœ•</button>
                </div>
                <div class="history-body" id="history-body">
                    <div class="history-scroll-wrapper">
                        <table class="history-table">
                            <thead>
                            <tr>
                                <th>Prize</th>
                                <th>Time</th>
                            </tr>
                            </thead>
                            <tbody id="history-table-body">
                            </tbody>
                        </table>
                    </div>
                    <p id="no-history-text" style="text-align: center; margin-top: 10px;">
                        You haven't received any prize yet. Spin now and claim your prize
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="overlay"></div>

    <div id="resultPopup" class="popup">
        <p>You won: <strong id="resultText"></strong></p>
        <button id="closePopupBtn">Claim</button>
    </div>

    <div><button onclick="myFunction()">Click me</button></div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script th:src="@{/js/script.js}"></script>
    <script th:src="@{/js/wheel.js}"></script>

</body>
</html>
